import{mkdirSync as s,writeFileSync as a}from"node:fs";import n from"content-disposition";async function u(r){try{const t=await fetch("https://api.cobalt.tools/api/json",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)});if(!t.ok)throw Error(`HTTP Error: ${t.status} ${t.statusText}`);return await t.json()}catch(t){throw Error("Error: ",{cause:t})}}async function p(r){try{const t=await fetch(r);if(!t.ok)throw Error(`HTTP Error: ${t.status} ${t.statusText}`);const o=n.parse(t.headers.get("Content-Disposition")).parameters.filename;console.log(`Writing file...: ${o}`);const e="./downloaded/";s(e,{recursive:!0});const i=e+o;a(i,new Uint8Array(await t.arrayBuffer())),console.log(`File written successfully: ${i}`)}catch(t){throw Error("Error: ",{cause:t})}}export{u as request,p as download};
